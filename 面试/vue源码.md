## flow
Flow 是 facebook 出品的 JavaScript 静态类型检查工具。Vue.js 的源码利用了 Flow 做了静态类型检查，所以了解 Flow 有助于我们阅读源码。

JavaScript 是动态类型语言，它的灵活性有目共睹，但是过于灵活的副作用是很容易就写出非常隐蔽的 隐患代码，在编译期甚至看上去都不会报错，但在运行阶段就可能出现各种奇怪的 bug。

类型检查是当前动态类型语言的发展趋势，所谓类型检查，就是在编译期尽早发现(由类型错误引起 的)bug，又不影响代码运行(不需要运行时动态检查类型)，使编写 JavaScript 具有和编写 Java 等强 类型语言相近的体验。

项目越复杂就越需要通过工具的手段来保证项目的维护性和增强代码的可读性。

Vue.js 在做 2.0 重构的 时候，在 ES2015 的基础上，除了 ESLint 保证代码⻛格之外，也引入了 Flow 做静态类型检查。之所以 选择 Flow，主要是因为 Babel 和 ESLint 都有对应的 Flow 插件以支持语法，可以完全沿用现有的构建 配置，非常小成本的改动就可以拥有静态类型检查的能力。

## Flow 的工作方式
通常类型检查分成 2 种方式: 
- 类型推断:通过变量的使用上下文来推断出变量类型，然后根据这些推断来检查类型。
- 类型注释:事先注释好我们期待的类型，Flow 会基于这些注释来判断。
- 
## Flow 在 Vue.js 源码中的应用
有时候我们想引用第三方库，或者自定义一些类型，但 Flow 并不认识，因此检查的时候会报错。为了 解决这类问题，Flow 提出了一个 libdef 的概念，可以用来识别这些第三方库或者是自定义类型， 而 Vue.js 也利用了这一特性。

在 Vue.js 的主目录下有 .flowconfig 文件， 它是 Flow 的配置文件，感兴趣的同学可以看官方文 档。这其中的 部分用来描述包含指定库定义的目录，默认是名为 flow-typed 的目录。
```javascript
/*@flow*/
var foo: ?string = null
[libs]
```

 这里 [libs] 配置的是 flow ，表示指定的库定义都在 flow 文件夹内。
## Vue.js 源码目录设计
Vue.js 的源码都在 src 目录下，其目录结构如下。
```
src
├── compiler  # 编译相关
├── core      # 核心代码
├── platforms # 不同平台的支持
├── server    # 服务端渲染
├── sfc       # .vue 文件解析 
├── shared    # 共享代码
```

## render
_render 私有方法

## virtual Dom
用一个原生的js对象是描述一个Dom节点的对象，是dom的一种抽象。

直接操作dom会有性能问题

VNode是一个树

anabbdom